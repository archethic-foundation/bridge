const __vite__fileDeps=["assets/index-C0pSVWJK.js","main.js","main.css","assets/create-BFgMQumI.js","assets/chain-bpRy55lx.js","assets/index-CW1jLsHT.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var On=Object.defineProperty;var Cn=(t,e,r)=>e in t?On(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ee=(t,e,r)=>(Cn(t,typeof e!="symbol"?e+"":e,r),r);import{b1 as Bn,b2 as Nt,g as jn,b3 as Le,b4 as Mn,aw as Rn,ax as Pn,ay as $n,az as bt,aA as Un,aB as Nn,au as wr,at as De,av as Dn,b5 as zn,b6 as Vn,b7 as jr,b8 as br,b9 as Mr,ba as be,_ as Sr,aE as Ln}from"../main.js";import{C as qn,P as Fn}from"./chain-bpRy55lx.js";/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */function Rr(t){if(typeof t!="string")throw new TypeError(`Invalid mnemonic type: ${typeof t}`);return t.normalize("NFKD")}function Wn(t){const e=Rr(t),r=e.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:r}}const Kn=t=>Rr(`mnemonic${t}`);function Gn(t,e=""){return Bn(Nt,Wn(t).nfkd,Kn(e),{c:2048,dkLen:64})}function Hn(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,S=0,E=0,B=p.length;E!==B&&p[E]===0;)E++,m++;for(var M=(B-E)*d+1>>>0,V=new Uint8Array(M);E!==B;){for(var Q=p[E],he=0,W=M-1;(Q!==0||he<S)&&W!==-1;W--,he++)Q+=256*V[W]>>>0,V[W]=Q%a>>>0,Q=Q/a>>>0;if(Q!==0)throw new Error("Non-zero carry");S=he,E++}for(var se=M-S;se!==M&&V[se]===0;)se++;for(var et=c.repeat(m);se<M;++se)et+=t.charAt(V[se]);return et}function g(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;for(var m=0,S=0,E=0;p[m]===c;)S++,m++;for(var B=(p.length-m)*u+1>>>0,M=new Uint8Array(B);p[m];){var V=e[p.charCodeAt(m)];if(V===255)return;for(var Q=0,he=B-1;(V!==0||Q<E)&&he!==-1;he--,Q++)V+=a*M[he]>>>0,M[he]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");E=Q,m++}for(var W=B-E;W!==B&&M[W]===0;)W++;for(var se=new Uint8Array(S+(B-W)),et=S;W!==B;)se[et++]=M[W++];return se}function y(p){var m=g(p);if(m)return m;throw new Error("Non-base"+a+" character")}return{encode:f,decodeUnsafe:g,decode:y}}var Zn=Hn;const Jn=Zn,Xn="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Yn=Jn(Xn);const Pr=jn(Yn),Ze=t=>Pr.encode(t),Je=t=>Pr.decode(t);function X(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const St=8192;function N(t){if(t.length<St)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=St){const n=t.slice(r,r+St);e+=String.fromCharCode(...n)}return btoa(e)}function Xe(t){var s;const e=t.startsWith("0x")?t.slice(2):t,n=((s=(e.length%2===0?e:`0${e}}`).match(/.{2}/g))==null?void 0:s.map(i=>parseInt(i,16)))??[];return Uint8Array.from(n)}function xe(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}function Dt(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}function Qn(t){let e=0,r=0,n=0;for(;;){let s=t[n];if(n+=1,e|=(s&127)<<r,!(s&128))break;r+=7}return{value:e,length:n}}class $r{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:s}=Qn(r);return this.shift(s),n}readVec(e){let r=this.readULEB(),n=[];for(let s=0;s<r;s++)n.push(e(this,s,r));return n}}function es(t,e){switch(e){case"base58":return Ze(t);case"base64":return N(t);case"hex":return xe(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function ts(t,e){switch(e){case"base58":return Je(t);case"base64":return X(t);case"hex":return Xe(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Ur(t,e=["<",">"]){const[r,n]=e,s=[];let i="",a=0;for(let c=0;c<t.length;c++){const u=t[c];if(u===r&&a++,u===n&&a--,a===0&&u===","){s.push(i.trim()),i="";continue}i+=u}return s.push(i.trim()),s}class Nr{constructor({size:e=1024,maxSize:r,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r||e,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const r=this.bytePosition+e;if(r>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return Tt(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return Tt(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return Tt(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return Dt(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,s)=>r(this,n,s,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return es(this.toBytes(),e)}}function Tt(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}var Dr=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},G=(t,e,r)=>(Dr(t,e,"read from private field"),r?r.call(t):e.get(t)),lt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ht=(t,e,r,n)=>(Dr(t,e,"write to private field"),e.set(t,r),r),Ie,Re,at,ge;const zr=class{constructor(t){lt(this,Ie,void 0),lt(this,Re,void 0),this.name=t.name,this.read=t.read,this.serializedSize=t.serializedSize??(()=>null),ht(this,Ie,t.write),ht(this,Re,t.serialize??((e,r)=>{const n=new Nr({size:this.serializedSize(e)??void 0,...r});return G(this,Ie).call(this,e,n),n.toBytes()})),this.validate=t.validate??(()=>{})}write(t,e){this.validate(t),G(this,Ie).call(this,t,e)}serialize(t,e){return this.validate(t),new rs(this,G(this,Re).call(this,t,e))}parse(t){const e=new $r(t);return this.read(e)}transform({name:t,input:e,output:r}){return new zr({name:t??this.name,read:n=>r(this.read(n)),write:(n,s)=>G(this,Ie).call(this,e(n),s),serializedSize:n=>this.serializedSize(e(n)),serialize:(n,s)=>G(this,Re).call(this,e(n),s),validate:n=>this.validate(e(n))})}};let Z=zr;Ie=new WeakMap;Re=new WeakMap;const Vr=Symbol.for("@mysten/serialized-bcs");function zt(t){return!!t&&typeof t=="object"&&t[Vr]===!0}class rs{constructor(e,r){lt(this,at,void 0),lt(this,ge,void 0),ht(this,at,e),ht(this,ge,r)}get[Vr](){return!0}toBytes(){return G(this,ge)}toHex(){return xe(G(this,ge))}toBase64(){return N(G(this,ge))}toBase58(){return Ze(G(this,ge))}parse(){return G(this,at).parse(G(this,ge))}}at=new WeakMap;ge=new WeakMap;function ft({size:t,...e}){return new Z({...e,serializedSize:()=>t})}function vt({readMethod:t,writeMethod:e,...r}){return ft({...r,read:n=>n[t](),write:(n,s)=>s[e](n),validate:n=>{var s;if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);(s=r.validate)==null||s.call(r,n)}})}function Et({readMethod:t,writeMethod:e,...r}){return ft({...r,read:n=>n[t](),write:(n,s)=>s[e](BigInt(n)),validate:n=>{var i;const s=BigInt(n);if(s<0||s>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${s}. Expected value in range 0-${r.maxValue}`);(i=r.validate)==null||i.call(r,s)}})}function ns({serialize:t,...e}){const r=new Z({...e,serialize:t,write:(n,s)=>{for(const i of r.serialize(n).toBytes())s.write8(i)}});return r}function ss({toBytes:t,fromBytes:e,...r}){return new Z({...r,read:n=>{const s=n.readULEB(),i=n.readBytes(s);return e(i)},write:(n,s)=>{const i=t(n);s.writeULEB(i.length);for(let a=0;a<i.length;a++)s.write8(i[a])},serialize:n=>{const s=t(n),i=Dt(s.length),a=new Uint8Array(i.length+s.length);return a.set(i,0),a.set(s,i.length),a},validate:n=>{var s;if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);(s=r.validate)==null||s.call(r,n)}})}function is(t){let e=null;function r(){return e||(e=t()),e}return new Z({name:"lazy",read:n=>r().read(n),serializedSize:n=>r().serializedSize(n),write:(n,s)=>r().write(n,s),serialize:(n,s)=>r().serialize(n,s).toBytes()})}const o={u8(t){return vt({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return vt({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return vt({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return Et({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return Et({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return Et({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return ft({name:"bool",size:1,read:e=>e.read8()===1,write:(e,r)=>r.write8(e?1:0),...t,validate:e=>{var r;if((r=t==null?void 0:t.validate)==null||r.call(t,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return ns({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(Dt(e)),...t})},bytes(t,e){return ft({name:`bytes[${t}]`,size:t,read:r=>r.readBytes(t),write:(r,n)=>{for(let s=0;s<t;s++)n.write8(r[s]??0)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},string(t){return ss({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,r){return new Z({name:`${e.name}[${t}]`,read:n=>{const s=new Array(t);for(let i=0;i<t;i++)s[i]=e.read(n);return s},write:(n,s)=>{for(const i of n)e.write(i,s)},...r,validate:n=>{var s;if((s=r==null?void 0:r.validate)==null||s.call(r,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},option(t){return o.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>"Some"in e?e.Some:null})},vector(t,e){return new Z({name:`vector<${t.name}>`,read:r=>{const n=r.readULEB(),s=new Array(n);for(let i=0;i<n;i++)s[i]=t.read(r);return s},write:(r,n)=>{n.writeULEB(r.length);for(const s of r)t.write(s,n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(t,e){return new Z({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:r=>{let n=0;for(let s=0;s<t.length;s++){const i=t[s].serializedSize(r[s]);if(i==null)return null;n+=i}return n},read:r=>{const n=[];for(const s of t)n.push(s.read(r));return n},write:(r,n)=>{for(let s=0;s<t.length;s++)t[s].write(r[s],n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)}})},struct(t,e,r){const n=Object.entries(e);return new Z({name:t,serializedSize:s=>{let i=0;for(const[a,c]of n){const u=c.serializedSize(s[a]);if(u==null)return null;i+=u}return i},read:s=>{const i={};for(const[a,c]of n)i[a]=c.read(s);return i},write:(s,i)=>{for(const[a,c]of n)c.write(s[a],i)},...r,validate:s=>{var i;if((i=r==null?void 0:r.validate)==null||i.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`)}})},enum(t,e,r){const n=Object.entries(e);return new Z({name:t,read:s=>{const i=s.readULEB(),[a,c]=n[i];return{[a]:(c==null?void 0:c.read(s))??!0}},write:(s,i)=>{const[a,c]=Object.entries(s)[0];for(let u=0;u<n.length;u++){const[d,f]=n[u];if(d===a){i.writeULEB(u),f==null||f.write(c,i);return}}},...r,validate:s=>{var c;if((c=r==null?void 0:r.validate)==null||c.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const i=Object.keys(s);if(i.length!==1)throw new TypeError(`Expected object with one key, found ${i.length}`);const[a]=i;if(!Object.hasOwn(e,a))throw new TypeError(`Invalid enum variant ${a}`)}})},map(t,e){return o.vector(o.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:r=>[...r.entries()],output:r=>{const n=new Map;for(const[s,i]of r)n.set(s,i);return n}})},generic(t,e){return(...r)=>e(...r).transform({name:`${e.name}<${r.map(n=>n.name).join(", ")}>`,input:n=>n,output:n=>n})},lazy(t){return is(t)}},as=32,Pe=class{constructor(t){if(this.types=new Map,this.counter=0,t instanceof Pe){this.schema=t.schema,this.types=new Map(t.types);return}if(this.schema=t,this.registerAddressType(Pe.ADDRESS,t.addressLength,t.addressEncoding),this.registerVectorType(t.vectorType),t.types&&t.types.structs)for(let e of Object.keys(t.types.structs))this.registerStructType(e,t.types.structs[e]);if(t.types&&t.types.enums)for(let e of Object.keys(t.types.enums))this.registerEnumType(e,t.types.enums[e]);if(t.types&&t.types.aliases)for(let e of Object.keys(t.types.aliases))this.registerAlias(e,t.types.aliases[e]);t.withPrimitives!==!1&&os(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(t,e,r){if(typeof t=="string"||Array.isArray(t)){const{name:n,params:s}=this.parseTypeName(t);return this.getTypeInterface(n).encode(this,e,r,s)}if(typeof t=="object"){const n=this.tempKey();return new Pe(this).registerStructType(n,t).ser(n,e,r)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(t)}`)}de(t,e,r){if(typeof e=="string")if(r)e=ts(e,r);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof t=="string"||Array.isArray(t)){const{name:n,params:s}=this.parseTypeName(t);return this.getTypeInterface(n).decode(this,e,s)}if(typeof t=="object"){const n=new Pe(this),s=this.tempKey();return n.registerStructType(s,t).de(s,e,r)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(t)}`)}hasType(t){return this.types.has(t)}registerAlias(t,e){return this.types.set(t,e),this}registerType(t,e,r,n=()=>!0){const{name:s,params:i}=this.parseTypeName(t);return this.types.set(s,{encode(a,c,u,d){const f=i.reduce((g,y,p)=>Object.assign(g,{[y]:d[p]}),{});return this._encodeRaw.call(a,new Nr(u),c,d,f)},decode(a,c,u){const d=i.reduce((f,g,y)=>Object.assign(f,{[g]:u[y]}),{});return this._decodeRaw.call(a,new $r(c),u,d)},_encodeRaw(a,c,u,d){if(n(c))return e.call(this,a,c,u,d);throw new Error(`Validation failed for type ${s}, data: ${c}`)},_decodeRaw(a,c,u){return r.call(this,a,c,u)}}),this}registerBcsType(t,e){return this.registerType(t,(r,n,s)=>{const i=s.map(a=>new Z({name:String(a),write:(c,u)=>{const{name:d,params:f}=this.parseTypeName(a),g=this.getTypeInterface(d),y=f.reduce((p,m,S)=>Object.assign(p,{[m]:s[S]}),{});return g._encodeRaw.call(this,u,c,f,y)},read:()=>{throw new Error("Not implemented")}}));return e(...i).write(n,r),r},(r,n)=>{const s=n.map(i=>new Z({name:String(i),write:(a,c)=>{throw new Error("Not implemented")},read:a=>{const{name:c,params:u}=this.parseTypeName(i),d=this.getTypeInterface(c),f=u.reduce((g,y,p)=>Object.assign(g,{[y]:n[p]}),{});return d._decodeRaw.call(this,a,u,f)}}));return e(...s).read(r)}),this}registerAddressType(t,e,r="hex"){switch(r){case"base64":return this.registerType(t,function(s,i){return X(i).reduce((a,c)=>a.write8(c),s)},function(s){return N(s.readBytes(e))});case"hex":return this.registerType(t,function(s,i){return Xe(i).reduce((a,c)=>a.write8(c),s)},function(s){return xe(s.readBytes(e))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(t){let{name:e,params:r}=this.parseTypeName(t);if(r.length>1)throw new Error("Vector can have only one type parameter; got "+e);return this.registerType(t,function(s,i,a,c){return s.writeVec(i,(u,d)=>{let f=a[0];if(!f)throw new Error(`Incorrect number of type parameters passed a to vector '${t}'`);let{name:g,params:y}=this.parseTypeName(f);if(this.hasType(g))return this.getTypeInterface(g)._encodeRaw.call(this,u,d,y,c);if(!(g in c))throw new Error(`Unable to find a matching type definition for ${g} in vector; make sure you passed a generic`);let{name:p,params:m}=this.parseTypeName(c[g]);return this.getTypeInterface(p)._encodeRaw.call(this,u,d,m,c)})},function(s,i,a){return s.readVec(c=>{let u=i[0];if(!u)throw new Error(`Incorrect number of type parameters passed to a vector '${t}'`);let{name:d,params:f}=this.parseTypeName(u);if(this.hasType(d))return this.getTypeInterface(d)._decodeRaw.call(this,c,f,a);if(!(d in a))throw new Error(`Unable to find a matching type definition for ${d} in vector; make sure you passed a generic`);let{name:g,params:y}=this.parseTypeName(a[d]);return this.getTypeInterface(g)._decodeRaw.call(this,c,y,a)})})}registerStructType(t,e){for(let a in e){let c=this.tempKey(),u=e[a];!Array.isArray(u)&&typeof u!="string"&&(e[a]=c,this.registerStructType(c,u))}let r=Object.freeze(e),n=Object.keys(r),{name:s,params:i}=this.parseTypeName(t);return this.registerType(t,function(c,u,d,f){if(!u||u.constructor!==Object)throw new Error(`Expected ${s} to be an Object, got: ${u}`);if(d.length!==i.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${i.length}, got: ${d.length}`);for(let g of n){if(!(g in u))throw new Error(`Struct ${s} requires field ${g}:${r[g]}`);const{name:y,params:p}=this.parseTypeName(r[g]);if(!i.includes(y))this.getTypeInterface(y)._encodeRaw.call(this,c,u[g],p,f);else{const m=i.indexOf(y);let{name:S,params:E}=this.parseTypeName(d[m]);if(this.hasType(S)){this.getTypeInterface(S)._encodeRaw.call(this,c,u[g],E,f);continue}if(!(S in f))throw new Error(`Unable to find a matching type definition for ${S} in ${s}; make sure you passed a generic`);let{name:B,params:M}=this.parseTypeName(f[S]);this.getTypeInterface(B)._encodeRaw.call(this,c,u[g],M,f)}}return c},function(c,u,d){if(u.length!==i.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${i.length}, got: ${u.length}`);let f={};for(let g of n){const{name:y,params:p}=this.parseTypeName(r[g]);if(!i.includes(y))f[g]=this.getTypeInterface(y)._decodeRaw.call(this,c,p,d);else{const m=i.indexOf(y);let{name:S,params:E}=this.parseTypeName(u[m]);if(this.hasType(S)){f[g]=this.getTypeInterface(S)._decodeRaw.call(this,c,E,d);continue}if(!(S in d))throw new Error(`Unable to find a matching type definition for ${S} in ${s}; make sure you passed a generic`);let{name:B,params:M}=this.parseTypeName(d[S]);f[g]=this.getTypeInterface(B)._decodeRaw.call(this,c,M,d)}}return f})}registerEnumType(t,e){for(let a in e){let c=this.tempKey(),u=e[a];u!==null&&!Array.isArray(u)&&typeof u!="string"&&(e[a]=c,this.registerStructType(c,u))}let r=Object.freeze(e),n=Object.keys(r),{name:s,params:i}=this.parseTypeName(t);return this.registerType(t,function(c,u,d,f){if(!u)throw new Error(`Unable to write enum "${s}", missing data.
Received: "${u}"`);if(typeof u!="object")throw new Error(`Incorrect data passed into enum "${s}", expected object with properties: "${n.join(" | ")}".
Received: "${JSON.stringify(u)}"`);let g=Object.keys(u)[0];if(g===void 0)throw new Error(`Empty object passed as invariant of the enum "${s}"`);let y=n.indexOf(g);if(y===-1)throw new Error(`Unknown invariant of the enum "${s}", allowed values: "${n.join(" | ")}"; received "${g}"`);let p=n[y],m=r[p];if(c.write8(y),m===null)return c;let S=i.indexOf(m),E=S===-1?m:d[S];{let{name:B,params:M}=this.parseTypeName(E);return this.getTypeInterface(B)._encodeRaw.call(this,c,u[g],M,f)}},function(c,u,d){let f=c.readULEB(),g=n[f],y=r[g];if(f===-1)throw new Error(`Decoding type mismatch, expected enum "${s}" invariant index, received "${f}"`);if(y===null)return{[g]:!0};let p=i.indexOf(y),m=p===-1?y:u[p];{let{name:S,params:E}=this.parseTypeName(m);return{[g]:this.getTypeInterface(S)._decodeRaw.call(this,c,E,d)}}})}getTypeInterface(t){let e=this.types.get(t);if(typeof e=="string"){let r=[];for(;typeof e=="string";){if(r.includes(e))throw new Error(`Recursive definition found: ${r.join(" -> ")} -> ${e}`);r.push(e),e=this.types.get(e)}}if(e===void 0)throw new Error(`Type ${t} is not registered`);return e}parseTypeName(t){if(Array.isArray(t)){let[c,...u]=t;return{name:c,params:u}}if(typeof t!="string")throw new Error(`Illegal type passed as a name of the type: ${t}`);let[e,r]=this.schema.genericSeparators||["<",">"],n=t.indexOf(e),s=Array.from(t).reverse().indexOf(r);if(n===-1&&s===-1)return{name:t,params:[]};if(n===-1||s===-1)throw new Error(`Unclosed generic in name '${t}'`);let i=t.slice(0,n),a=Ur(t.slice(n+1,t.length-s-1),this.schema.genericSeparators);return{name:i,params:a}}};let I=Pe;I.U8="u8";I.U16="u16";I.U32="u32";I.U64="u64";I.U128="u128";I.U256="u256";I.BOOL="bool";I.VECTOR="vector";I.ADDRESS="address";I.STRING="string";I.HEX="hex-string";I.BASE58="base58-string";I.BASE64="base64-string";function os(t){t.registerType(I.U8,function(e,r){return e.write8(r)},function(e){return e.read8()},e=>e<256),t.registerType(I.U16,function(e,r){return e.write16(r)},function(e){return e.read16()},e=>e<65536),t.registerType(I.U32,function(e,r){return e.write32(r)},function(e){return e.read32()},e=>e<=4294967296n),t.registerType(I.U64,function(e,r){return e.write64(r)},function(e){return e.read64()}),t.registerType(I.U128,function(e,r){return e.write128(r)},function(e){return e.read128()}),t.registerType(I.U256,function(e,r){return e.write256(r)},function(e){return e.read256()}),t.registerType(I.BOOL,function(e,r){return e.write8(r)},function(e){return e.read8().toString(10)==="1"}),t.registerType(I.STRING,function(e,r){return e.writeVec(Array.from(r),(n,s)=>n.write8(s.charCodeAt(0)))},function(e){return e.readVec(r=>r.read8()).map(r=>String.fromCharCode(Number(r))).join("")},e=>!0),t.registerType(I.HEX,function(e,r){return e.writeVec(Array.from(Xe(r)),(n,s)=>n.write8(s))},function(e){let r=e.readVec(n=>n.read8());return xe(new Uint8Array(r))}),t.registerType(I.BASE58,function(e,r){return e.writeVec(Array.from(Je(r)),(n,s)=>n.write8(s))},function(e){let r=e.readVec(n=>n.read8());return Ze(new Uint8Array(r))}),t.registerType(I.BASE64,function(e,r){return e.writeVec(Array.from(X(r)),(n,s)=>n.write8(s))},function(e){let r=e.readVec(n=>n.read8());return N(new Uint8Array(r))})}function cs(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:as,addressEncoding:"hex"}}const us=32;function Tr(t){try{return Je(t).length===us}catch{return!1}}const Ye=32;function oe(t){return ds(t)&&ls(t)===Ye}function tt(t){return oe(t)}function _(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Ye*2,"0")}`}function te(t,e=!1){return _(t,e)}function ds(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function ls(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}class hs extends TypeError{constructor(e,r){let n;const{message:s,explanation:i,...a}=e,{path:c}=e,u=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??u),i!=null&&(this.cause=u),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function fs(t){return q(t)&&typeof t[Symbol.iterator]=="function"}function q(t){return typeof t=="object"&&t!=null}function F(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function gs(t){const{done:e,value:r}=t.next();return e?void 0:r}function ps(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:a}=r,{refinement:c,message:u=`Expected a value of type \`${a}\`${c?` with refinement \`${c}\``:""}, but received: \`${F(n)}\``}=t;return{value:n,type:a,refinement:c,key:s[s.length-1],path:s,branch:i,...t,message:u}}function*vr(t,e,r,n){fs(t)||(t=[t]);for(const s of t){const i=ps(s,e,r,n);i&&(yield i)}}function*Vt(t,e,r={}){const{path:n=[],branch:s=[t],coerce:i=!1,mask:a=!1}=r,c={path:n,branch:s};if(i&&(t=e.coercer(t,c),a&&e.type!=="type"&&q(e.schema)&&q(t)&&!Array.isArray(t)))for(const d in t)e.schema[d]===void 0&&delete t[d];let u="valid";for(const d of e.validator(t,c))d.explanation=r.message,u="not_valid",yield[d,void 0];for(let[d,f,g]of e.entries(t,c)){const y=Vt(f,g,{path:d===void 0?n:[...n,d],branch:d===void 0?s:[...s,f],coerce:i,mask:a,message:r.message});for(const p of y)p[0]?(u=p[0].refinement!=null?"not_refined":"not_valid",yield[p[0],void 0]):i&&(f=p[1],d===void 0?t=f:t instanceof Map?t.set(d,f):t instanceof Set?t.add(f):q(t)&&(f!==void 0||d in t)&&(t[d]=f))}if(u!=="not_valid")for(const d of e.refiner(t,c))d.explanation=r.message,u="not_refined",yield[d,void 0];u==="valid"&&(yield[void 0,t])}class ne{constructor(e){const{type:r,schema:n,validator:s,refiner:i,coercer:a=u=>u,entries:c=function*(){}}=e;this.type=r,this.schema=n,this.entries=c,this.coercer=a,s?this.validator=(u,d)=>{const f=s(u,d);return vr(f,d,this,u)}:this.validator=()=>[],i?this.refiner=(u,d)=>{const f=i(u,d);return vr(f,d,this,u)}:this.refiner=()=>[]}assert(e,r){return _t(e,this,r)}create(e,r){return Lr(e,this,r)}is(e){return D(e,this)}mask(e,r){return qr(e,this,r)}validate(e,r={}){return Qe(e,this,r)}}function _t(t,e,r){const n=Qe(t,e,{message:r});if(n[0])throw n[0]}function Lr(t,e,r){const n=Qe(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function qr(t,e,r){const n=Qe(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function D(t,e){return!Qe(t,e)[0]}function Qe(t,e,r={}){const n=Vt(t,e,r),s=gs(n);return s[0]?[new hs(s[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,s[1]]}function qe(...t){const e=t[0].type==="type",r=t.map(s=>s.schema),n=Object.assign({},...r);return e?ms(n):h(n)}function z(t,e){return new ne({type:t,schema:null,validator:e})}function At(){return z("any",()=>!0)}function v(t){return new ne({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${F(e)}`}})}function ys(){return z("bigint",t=>typeof t=="bigint")}function P(){return z("boolean",t=>typeof t=="boolean")}function re(){return z("integer",t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${F(t)}`)}function b(t){const e=F(t),r=typeof t;return new ne({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${F(n)}`}})}function Fr(){return z("never",()=>!1)}function C(t){return new ne({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function Ee(){return z("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${F(t)}`)}function h(t){const e=t?Object.keys(t):[],r=Fr();return new ne({type:"object",schema:t||null,*entries(n){if(t&&q(n)){const s=new Set(Object.keys(n));for(const i of e)s.delete(i),yield[i,n[i],t[i]];for(const i of s)yield[i,n[i],r]}},validator(n){return q(n)||`Expected an object, but received: ${F(n)}`},coercer(n){return q(n)?{...n}:n}})}function w(t){return new ne({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function Y(t,e){return new ne({type:"record",schema:null,*entries(r){if(q(r))for(const n in r){const s=r[n];yield[n,n,t],yield[n,s,e]}},validator(r){return q(r)||`Expected an object, but received: ${F(r)}`}})}function l(){return z("string",t=>typeof t=="string"||`Expected a string, but received: ${F(t)}`)}function Wr(t){const e=Fr();return new ne({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let s=0;s<n;s++)yield[s,r[s],t[s]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${F(r)}`}})}function ms(t){const e=Object.keys(t);return new ne({type:"type",schema:t,*entries(r){if(q(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return q(r)||`Expected an object, but received: ${F(r)}`},coercer(r){return q(r)?{...r}:r}})}function j(t){const e=t.map(r=>r.type).join(" | ");return new ne({type:"union",schema:null,coercer(r){for(const n of t){const[s,i]=n.validate(r,{coerce:!0});if(!s)return i}return r},validator(r,n){const s=[];for(const i of t){const[...a]=Vt(r,i,n),[c]=a;if(c[0])for(const[u]of a)u&&s.push(u);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${F(r)}`,...s]}})}function Kr(){return z("unknown",()=>!0)}BigInt(1e9);const Lt="0x1",Gr="0x2";te("0x6");const ws=`${Gr}::sui::SUI`;te("0x5");const _e="::",bs="0x2::sui::SUI",Ss="0.50.1",Ts="1.19.0",vs={"-32700":"ParseError","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError"};class Hr extends Error{}class Zr extends Hr{constructor(e,r){super(e),this.code=r,this.type=vs[r]??"ServerError"}}class Es extends Hr{constructor(e,r,n){super(e),this.status=r,this.statusText=n}}var qt=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},A=(t,e,r)=>(qt(t,e,"read from private field"),r?r.call(t):e.get(t)),fe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Oe=(t,e,r,n)=>(qt(t,e,"write to private field"),e.set(t,r),r),ks=(t,e,r,n)=>({set _(s){Oe(t,e,s)},get _(){return A(t,e,n)}}),Jr=(t,e,r)=>(qt(t,e,"access private method"),r),Se,ze,ce,ve,Fe,Ce,Ot,Xr,Ft,Yr;function xs(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const Is={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class _s{constructor(e,r={}){if(fe(this,Ot),fe(this,Ft),fe(this,Se,0),fe(this,ze,0),fe(this,ce,null),fe(this,ve,null),fe(this,Fe,new Set),fe(this,Ce,new Map),this.endpoint=e,this.options={...Is,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=xs(this.endpoint))}async makeRequest(e,r){const n=await Jr(this,Ot,Xr).call(this);return new Promise((s,i)=>{Oe(this,Se,A(this,Se)+1),A(this,Ce).set(A(this,Se),{resolve:s,reject:i,timeout:setTimeout(()=>{A(this,Ce).delete(A(this,Se)),i(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:A(this,Se),method:e,params:r}))}).then(({error:s,result:i})=>{if(s)throw new Zr(s.message,s.code);return i})}async subscribe(e){const r=new As(e);return A(this,Fe).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}}Se=new WeakMap;ze=new WeakMap;ce=new WeakMap;ve=new WeakMap;Fe=new WeakMap;Ce=new WeakMap;Ot=new WeakSet;Xr=function(){return A(this,ve)?A(this,ve):(Oe(this,ve,new Promise(t=>{var e;(e=A(this,ce))==null||e.close(),Oe(this,ce,new this.options.WebSocketConstructor(this.endpoint)),A(this,ce).addEventListener("open",()=>{Oe(this,ze,0),t(A(this,ce))}),A(this,ce).addEventListener("close",()=>{ks(this,ze)._++,A(this,ze)<=this.options.maxReconnects&&setTimeout(()=>{Jr(this,Ft,Yr).call(this)},this.options.reconnectTimeout)}),A(this,ce).addEventListener("message",({data:r})=>{let n;try{n=JSON.parse(r)}catch(s){console.error(new Error(`Failed to parse RPC message: ${r}`,{cause:s}));return}if("id"in n&&n.id!=null&&A(this,Ce).has(n.id)){const{resolve:s,timeout:i}=A(this,Ce).get(n.id);clearTimeout(i),s(n)}else if("params"in n){const{params:s}=n;A(this,Fe).forEach(i=>{i.subscriptionId===s.subscription&&s.subscription===i.subscriptionId&&i.onMessage(s.result)})}})})),A(this,ve))};Ft=new WeakSet;Yr=async function(){var t;return(t=A(this,ce))==null||t.close(),Oe(this,ve,null),Promise.allSettled([...A(this,Fe)].map(e=>e.subscribe(this)))};class As{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}}var Wt=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},L=(t,e,r)=>(Wt(t,e,"read from private field"),r?r.call(t):e.get(t)),rt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ct=(t,e,r,n)=>(Wt(t,e,"write to private field"),e.set(t,r),r),Os=(t,e,r)=>(Wt(t,e,"access private method"),r),$e,H,Ve,Bt,Qr;class Cs{constructor(e){rt(this,Bt),rt(this,$e,0),rt(this,H,void 0),rt(this,Ve,void 0),Ct(this,H,e)}fetch(e,r){const n=L(this,H).fetch??globalThis.fetch;if(!this.fetch)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){var s,i;Ct(this,$e,L(this,$e)+1);const r=await this.fetch(((s=L(this,H).rpc)==null?void 0:s.url)??L(this,H).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Ss,"Client-Target-Api-Version":Ts,...(i=L(this,H).rpc)==null?void 0:i.headers},body:JSON.stringify({jsonrpc:"2.0",id:L(this,$e),method:e.method,params:e.params})});if(!r.ok)throw new Es(`Unexpected status code: ${r.status}`,r.status,r.statusText);const n=await r.json();if("error"in n&&n.error!=null)throw new Zr(n.error.message,n.error.code);return n.result}async subscribe(e){const r=await Os(this,Bt,Qr).call(this).subscribe(e);return async()=>!!await r()}}$e=new WeakMap;H=new WeakMap;Ve=new WeakMap;Bt=new WeakSet;Qr=function(){var t;if(!L(this,Ve)){const e=L(this,H).WebSocketConstructor??globalThis.WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Ct(this,Ve,new _s(((t=L(this,H).websocket)==null?void 0:t.url)??L(this,H).url,{WebSocketConstructor:e,...L(this,H).websocket}))}return L(this,Ve)};const Bs=/^vector<(.+)>$/,js=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class ue{static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const n=e.match(Bs);if(n)return{vector:ue.parseFromStr(n[1],r)};const s=e.match(js);if(s)return{struct:{address:r?_(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:ue.parseStructTypeArgs(s[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return Ur(e).map(n=>ue.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${ue.tagToString(e.vector)}>`;if("struct"in e){const r=e.struct,n=r.typeParams.map(ue.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}const x=new I({...cs(),types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function en(t){return o.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function Ms(t){return o.enum("Option",{None:null,Some:t})}function Kt(t){return t.transform({input:e=>({[e.kind]:e}),output:e=>{const r=Object.keys(e)[0];return{kind:r,...e[r]}}})}const J=o.bytes(Ye).transform({input:t=>typeof t=="string"?Xe(_(t)):t,output:t=>_(xe(t))}),Gt=o.vector(o.u8()).transform({name:"ObjectDigest",input:t=>Je(t),output:t=>Ze(new Uint8Array(t))}),We=o.struct("SuiObjectRef",{objectId:J,version:o.u64(),digest:Gt}),Ht=o.struct("SharedObjectRef",{objectId:J,initialSharedVersion:o.u64(),mutable:o.bool()}),gt=o.enum("ObjectArg",{ImmOrOwned:We,Shared:Ht,Receiving:We}),Zt=o.enum("CallArg",{Pure:o.vector(o.u8()),Object:gt,ObjVec:o.vector(gt)}),Me=o.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:o.lazy(()=>Me),struct:o.lazy(()=>tr),u16:null,u32:null,u256:null}),K=Kt(o.enum("Argument",{GasCoin:null,Input:o.struct("Input",{index:o.u16()}),Result:o.struct("Result",{index:o.u16()}),NestedResult:o.struct("NestedResult",{index:o.u16(),resultIndex:o.u16()})})),Jt=o.struct("ProgrammableMoveCall",{package:J,module:o.string(),function:o.string(),type_arguments:o.vector(Me),arguments:o.vector(K)}).transform({input:t=>{const[e,r,n]=t.target.split("::"),s=t.typeArguments.map(i=>ue.parseFromStr(i,!0));return{package:_(e),module:r,function:n,type_arguments:s,arguments:t.arguments}},output:t=>({target:[t.package,t.module,t.function].join("::"),arguments:t.arguments,typeArguments:t.type_arguments.map(ue.tagToString)})}),Xt=Kt(o.enum("Transaction",{MoveCall:Jt,TransferObjects:o.struct("TransferObjects",{objects:o.vector(K),address:K}),SplitCoins:o.struct("SplitCoins",{coin:K,amounts:o.vector(K)}),MergeCoins:o.struct("MergeCoins",{destination:K,sources:o.vector(K)}),Publish:o.struct("Publish",{modules:o.vector(o.vector(o.u8())),dependencies:o.vector(J)}),MakeMoveVec:o.struct("MakeMoveVec",{type:Ms(Me),objects:o.vector(K)}),Upgrade:o.struct("Upgrade",{modules:o.vector(o.vector(o.u8())),dependencies:o.vector(J),packageId:J,ticket:K})})),Yt=o.struct("ProgrammableTransaction",{inputs:o.vector(Zt),transactions:o.vector(Xt)}),Qt=o.enum("TransactionKind",{ProgrammableTransaction:Yt,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),er=o.enum("TransactionExpiration",{None:null,Epoch:en()}),tr=o.struct("StructTag",{address:J,module:o.string(),name:o.string(),typeParams:o.vector(Me)}),rr=o.struct("GasData",{payment:o.vector(We),owner:J,price:o.u64(),budget:o.u64()}),nr=o.struct("TransactionDataV1",{kind:Qt,sender:J,gasData:rr,expiration:er}),sr=o.enum("TransactionData",{V1:nr}),Rs=o.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Ps=o.enum("IntentVersion",{V0:null}),$s=o.enum("AppId",{Sui:null}),Us=o.struct("Intent",{scope:Rs,version:Ps,appId:$s}),Ns=o.generic(["T"],t=>o.struct("IntentMessage<T>",{intent:Us,value:t})),ir=o.enum("CompressedSignature",{ED25519:o.fixedArray(64,o.u8()),Secp256k1:o.fixedArray(64,o.u8()),Secp256r1:o.fixedArray(64,o.u8()),ZkLogin:o.vector(o.u8())}),ar=o.enum("PublicKey",{ED25519:o.fixedArray(32,o.u8()),Secp256k1:o.fixedArray(33,o.u8()),Secp256r1:o.fixedArray(33,o.u8()),ZkLogin:o.vector(o.u8())}),or=o.struct("MultiSigPkMap",{pubKey:ar,weight:o.u8()}),cr=o.struct("MultiSigPublicKey",{pk_map:o.vector(or),threshold:o.u16()}),tn=o.struct("MultiSig",{sigs:o.vector(ir),bitmap:o.u16(),multisig_pk:cr}),Ds=o.vector(o.u8()).transform({input:t=>typeof t=="string"?X(t):t,output:t=>N(new Uint8Array(t))}),rn=o.struct("SenderSignedTransaction",{intentMessage:Ns(sr),txSignatures:o.vector(Ds)}),nn=o.vector(rn,{name:"SenderSignedData"}),O={...o,U8:o.u8(),U16:o.u16(),U32:o.u32(),U64:o.u64(),U128:o.u128(),U256:o.u256(),ULEB128:o.uleb128(),Bool:o.bool(),String:o.string(),Address:J,Argument:K,CallArg:Zt,CompressedSignature:ir,GasData:rr,MultiSig:tn,MultiSigPkMap:or,MultiSigPublicKey:cr,ObjectArg:gt,ObjectDigest:Gt,ProgrammableMoveCall:Jt,ProgrammableTransaction:Yt,PublicKey:ar,SenderSignedData:nn,SenderSignedTransaction:rn,SharedObjectRef:Ht,StructTag:tr,SuiObjectRef:We,Transaction:Xt,TransactionData:sr,TransactionDataV1:nr,TransactionExpiration:er,TransactionKind:Qt,TypeTag:Me,ser:x.ser.bind(x),de:x.de.bind(x),getTypeInterface:x.getTypeInterface.bind(x),hasType:x.hasType.bind(x),parseTypeName:x.parseTypeName.bind(x),registerAddressType:x.registerAddressType.bind(x),registerAlias:x.registerAlias.bind(x),registerBcsType:x.registerBcsType.bind(x),registerEnumType:x.registerEnumType.bind(x),registerStructType:x.registerStructType.bind(x),registerType:x.registerType.bind(x),types:x.types};x.registerBcsType("utf8string",()=>o.string({name:"utf8string"}));x.registerBcsType("unsafe_u64",()=>en());x.registerBcsType("enumKind",t=>Kt(t));[J,K,Zt,ir,rr,tn,or,cr,gt,Gt,Jt,Yt,ar,nn,Ht,tr,We,Xt,sr,nr,er,Qt,Me].forEach(t=>{x.registerBcsType(t.name,()=>t)});const ur=j([h({AddressOwner:l()}),h({ObjectOwner:l()}),h({Shared:h({initial_shared_version:C(l())})}),b("Immutable")]);z("SuiJsonValue",()=>!0);const zs=j([h({u32:l()}),h({u64:l()}),h({f64:l()})]);h({attributes:Y(l(),C(zs)),featureFlags:Y(l(),P()),maxSupportedProtocolVersion:l(),minSupportedProtocolVersion:l(),protocolVersion:l()});j([l(),b("package")]);const pe=h({digest:l(),objectId:l(),version:j([Ee(),l(),ys()])});h({owner:ur,reference:pe});h({objectId:l(),sequenceNumber:l()});h({payment:v(pe),owner:l(),price:l(),budget:l()});const Vs=qe(pe,h({type:l(),owner:ur,previousTransaction:l()})),Ls=Y(l(),At()),qs=Y(l(),Kr()),Fs=h({type:l(),fields:Ls,hasPublicTransfer:P()}),Ws=h({disassembled:qs}),Ks=j([qe(Fs,h({dataType:b("moveObject")})),qe(Ws,h({dataType:b("package")}))]),Gs=h({type:l(),hasPublicTransfer:P(),version:l(),bcsBytes:l()}),Hs=h({id:l(),moduleMap:Y(l(),l())}),Zs=j([qe(Gs,h({dataType:b("moveObject")})),qe(Hs,h({dataType:b("package")}))]);BigInt(1e9);const sn=h({code:l(),error:w(l()),object_id:w(l()),parent_object_id:w(l()),version:w(l()),digest:w(l())}),Js=h({data:C(w(Y(l(),l()))),error:C(w(sn))}),Xs=j([Js,w(Y(l(),l()))]),an=h({objectId:l(),version:l(),digest:l(),type:C(w(l())),content:C(w(Ks)),bcs:C(w(Zs)),owner:C(w(ur)),previousTransaction:C(w(l())),storageRebate:C(w(l())),display:C(w(Xs))});h({showType:C(w(P())),showContent:C(w(P())),showBcs:C(w(P())),showOwner:C(w(P())),showPreviousTransaction:C(w(P())),showStorageRebate:C(w(P())),showDisplay:C(w(P()))});j([b("Exists"),b("notExists"),b("Deleted")]);v(Vs);const Ys=h({data:C(w(an)),error:C(w(sn))});function Qs(t){return t.data}function ei(t){if(t.error&&"object_id"in t.error&&"version"in t.error&&"digest"in t.error){const e=t.error;return{objectId:e.object_id,version:e.version,digest:e.digest}}}function Er(t){if("reference"in t)return t.reference;const e=Qs(t);return e?{objectId:e.objectId,version:e.version,digest:e.digest}:ei(t)}h({objectId:l(),atCheckpoint:w(Ee())});h({data:v(Ys),nextCursor:w(C(l())),hasNextPage:P()});j([h({details:an,status:b("VersionFound")}),h({details:l(),status:b("ObjectNotExists")}),h({details:pe,status:b("ObjectDeleted")}),h({details:Wr([l(),Ee()]),status:b("VersionNotFound")}),h({details:h({asked_version:Ee(),latest_version:Ee(),object_id:l()}),status:b("VersionTooHigh")})]);const ti=j([l(),h({Object:l()})]);v(ti);const ri=h({address:l(),name:l()}),ni=j([b("Private"),b("Public"),b("Friend")]),dr=h({abilities:v(l())}),si=h({constraints:dr,isPhantom:P()}),ii=h({TypeParameter:Ee()}),kt=Wr([h({module:l(),package:l(),function:l()}),l()]);h({rank3Days:v(kt),rank7Days:v(kt),rank30Days:v(kt)});function on(t){if(!t)return!1;if(typeof t=="string"||D(t,ii)||cn(t))return!0;if(typeof t!="object")return!1;const e=t;return!!(D(e.Reference,Be)||D(e.MutableReference,Be)||D(e.Vector,Be))}const Be=z("SuiMoveNormalizedType",on);function cn(t){if(!t||typeof t!="object")return!1;const e=t;if(!e.Struct||typeof e.Struct!="object")return!1;const r=e.Struct;return!(typeof r.address!="string"||typeof r.module!="string"||typeof r.name!="string"||!Array.isArray(r.typeArguments)||!r.typeArguments.every(n=>on(n)))}z("SuiMoveNormalizedStructType",cn);const ai=h({visibility:ni,isEntry:P(),typeParameters:v(dr),parameters:v(Be),return:v(Be)}),oi=h({name:l(),type:Be}),ci=h({abilities:dr,typeParameters:v(si),fields:v(oi)}),ui=h({fileFormatVersion:Ee(),address:l(),name:l(),friends:v(ri),structs:Y(l(),ci),exposedFunctions:Y(l(),ai)});Y(l(),ui);function jt(t){return typeof t=="object"&&"MutableReference"in t?t.MutableReference:void 0}function un(t){return typeof t=="object"&&"Reference"in t?t.Reference:void 0}function lr(t){if(typeof t=="object"&&"Struct"in t)return t;const e=un(t),r=jt(t);if(typeof e=="object"&&"Struct"in e)return e;if(typeof r=="object"&&"Struct"in r)return r}const di=j([h({ImmOrOwned:pe}),h({Shared:h({objectId:l(),initialSharedVersion:j([re(),l()]),mutable:P()})}),h({Receiving:pe})]),pt=h({Pure:v(re())}),Mt=h({Object:di}),yt=j([pt,Mt]);function li(t,e){return{Pure:Array.from(t instanceof Uint8Array?t:zt(t)?t.toBytes():O.ser(e,t,{maxSize:1/0}).toBytes())}}const U={Pure:li,ObjectRef({objectId:t,digest:e,version:r}){return{Object:{ImmOrOwned:{digest:e,version:r,objectId:_(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{Object:{Shared:{mutable:e,initialSharedVersion:r,objectId:_(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{Object:{Receiving:{digest:e,version:r,objectId:_(t)}}}}};function kr(t){return typeof t=="string"?_(t):"ImmOrOwned"in t.Object?_(t.Object.ImmOrOwned.objectId):"Receiving"in t.Object?_(t.Object.Receiving.objectId):_(t.Object.Shared.objectId)}function hi(t){return typeof t=="object"&&"Object"in t&&"Shared"in t.Object?t.Object.Shared:void 0}function fi(t){var e;return((e=hi(t))==null?void 0:e.mutable)??!1}function gi(t){function e(r,n){return t(r,n)}return e.u8=r=>t(O.U8.serialize(r)),e.u16=r=>t(O.U16.serialize(r)),e.u32=r=>t(O.U32.serialize(r)),e.u64=r=>t(O.U64.serialize(r)),e.u128=r=>t(O.U128.serialize(r)),e.u256=r=>t(O.U256.serialize(r)),e.bool=r=>t(O.Bool.serialize(r)),e.string=r=>t(O.String.serialize(r)),e.address=r=>t(O.Address.serialize(r)),e.id=e.address,e}const pi="object",yi="ID",mi="ascii",wi="String",bi="string",Si="String",Ti="option",vi="Option",Ei={address:Gr,module:pi,name:yi},ki={address:Lt,module:mi,name:wi},xi={address:Lt,module:bi,name:Si},Ii={address:Lt,module:Ti,name:vi},nt=(t,e)=>t.address===e.address&&t.module===e.module&&t.name===e.name;function _i(t){var r;const e=(r=lr(t))==null?void 0:r.Struct;return(e==null?void 0:e.address)==="0x2"&&(e==null?void 0:e.module)==="tx_context"&&(e==null?void 0:e.name)==="TxContext"}function xt(t,e){if(!(typeof e>"u")&&typeof e!==t)throw new Error(`Expect ${e} to be ${t}, received ${typeof e}`)}const Ai=["Address","Bool","U8","U16","U32","U64","U128","U256"];function Rt(t,e){if(typeof t=="string"&&Ai.includes(t)){if(t in["U8","U16","U32","U64","U128","U256"])xt("number",e);else if(t==="Bool")xt("boolean",e);else if(t==="Address"&&(xt("string",e),e&&!oe(e)))throw new Error("Invalid Sui Address");return t.toLowerCase()}else if(typeof t=="string")throw new Error(`Unknown pure normalized type ${JSON.stringify(t,null,2)}`);if("Vector"in t){if((e===void 0||typeof e=="string")&&t.Vector==="U8")return"string";if(e!==void 0&&!Array.isArray(e))throw new Error(`Expect ${e} to be a array, received ${typeof e}`);const r=Rt(t.Vector,e?e[0]:void 0);return r===void 0?void 0:`vector<${r}>`}if("Struct"in t){if(nt(t.Struct,ki))return"string";if(nt(t.Struct,xi))return"utf8string";if(nt(t.Struct,Ei))return"address";if(nt(t.Struct,Ii)){const r={Vector:t.Struct.typeArguments[0]};return Rt(r,e)}}}function Oi(t,e){const r=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),Le(n,{dkLen:32})}function $(t,e){return Lr(t,e)}const Ci=t=>j([h({None:j([b(!0),b(null)])}),h({Some:t})]),Ke=j([h({kind:b("Input"),index:re(),value:w(At()),type:w(b("object"))}),h({kind:b("Input"),index:re(),value:w(At()),type:b("pure")})]),Bi=[Ke,h({kind:b("GasCoin")}),h({kind:b("Result"),index:re()}),h({kind:b("NestedResult"),index:re(),resultIndex:re()})],le=j([...Bi]),dn=h({kind:b("MoveCall"),target:z("target",l().validator),typeArguments:v(l()),arguments:v(le)}),ln=h({kind:b("TransferObjects"),objects:v(le),address:le}),hn=h({kind:b("SplitCoins"),coin:le,amounts:v(le)}),fn=h({kind:b("MergeCoins"),destination:le,sources:v(le)}),gn=h({kind:b("MakeMoveVec"),type:w(Ci(Y(l(),Kr()))),objects:v(le)}),pn=h({kind:b("Publish"),modules:v(v(re())),dependencies:v(l())}),yn=h({kind:b("Upgrade"),modules:v(v(re())),dependencies:v(l()),packageId:l(),ticket:le}),ji=[dn,ln,hn,fn,pn,yn,gn],Mi=j([...ji]),we={MoveCall(t){return $({kind:"MoveCall",target:t.target,arguments:t.arguments??[],typeArguments:t.typeArguments??[]},dn)},TransferObjects(t,e){return e.kind==="Input"&&e.type==="pure"&&typeof e.value!="object"&&(e.value=U.Pure(O.Address.serialize(e.value))),$({kind:"TransferObjects",objects:t,address:e},ln)},SplitCoins(t,e){return e.forEach(r=>{r.kind==="Input"&&r.type==="pure"&&typeof r.value!="object"&&(r.value=U.Pure(O.U64.serialize(r.value)))}),$({kind:"SplitCoins",coin:t,amounts:e},hn)},MergeCoins(t,e){return $({kind:"MergeCoins",destination:t,sources:e},fn)},Publish({modules:t,dependencies:e}){return $({kind:"Publish",modules:t.map(r=>typeof r=="string"?Array.from(X(r)):r),dependencies:e.map(r=>te(r))},pn)},Upgrade({modules:t,dependencies:e,packageId:r,ticket:n}){return $({kind:"Upgrade",modules:t.map(s=>typeof s=="string"?Array.from(X(s)):s),dependencies:e.map(s=>te(s)),packageId:r,ticket:n},yn)},MakeMoveVec({type:t,objects:e}){return $({kind:"MakeMoveVec",type:t?{Some:ue.parseFromStr(t)}:{None:null},objects:e},gn)}},Ri=w(C(j([h({Epoch:re()}),h({None:j([b(!0),b(null)])})]))),xr=z("StringEncodedBigint",t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}}),Pi=h({budget:w(xr),price:w(xr),payment:w(v(pe)),owner:w(l())}),st=h({version:b(1),sender:w(l()),expiration:Ri,gasConfig:Pi,inputs:v(Ke),transactions:v(Mi)});function Ir(t){return _(t).replace("0x","")}class de{constructor(e){this.version=1,this.sender=e==null?void 0:e.sender,this.expiration=e==null?void 0:e.expiration,this.gasConfig=(e==null?void 0:e.gasConfig)??{},this.inputs=(e==null?void 0:e.inputs)??[],this.transactions=(e==null?void 0:e.transactions)??[]}static fromKindBytes(e){const r=O.TransactionKind.parse(e),n="ProgrammableTransaction"in r?r.ProgrammableTransaction:null;if(!n)throw new Error("Unable to deserialize from bytes.");const s=$({version:1,gasConfig:{},inputs:n.inputs.map((i,a)=>$({kind:"Input",value:i,index:a,type:D(i,pt)?"pure":"object"},Ke)),transactions:n.transactions},st);return de.restore(s)}static fromBytes(e){var a;const r=O.TransactionData.parse(e),n=r==null?void 0:r.V1,s="ProgrammableTransaction"in n.kind?(a=n==null?void 0:n.kind)==null?void 0:a.ProgrammableTransaction:null;if(!n||!s)throw new Error("Unable to deserialize from bytes.");const i=$({version:1,sender:n.sender,expiration:n.expiration,gasConfig:n.gasData,inputs:s.inputs.map((c,u)=>$({kind:"Input",value:c,index:u,type:D(c,pt)?"pure":"object"},Ke)),transactions:s.transactions},st);return de.restore(i)}static restore(e){_t(e,st);const r=new de;return Object.assign(r,e),r}static getDigestFromBytes(e){const r=Oi("TransactionData",e);return Ze(r)}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){const s=this.inputs.map(f=>(_t(f.value,yt),f.value)),i={ProgrammableTransaction:{inputs:s,transactions:this.transactions}};if(n)return O.TransactionKind.serialize(i,{maxSize:e}).toBytes();const a=(r==null?void 0:r.expiration)??this.expiration,c=(r==null?void 0:r.sender)??this.sender,u={...this.gasConfig,...r==null?void 0:r.gasConfig};if(!c)throw new Error("Missing transaction sender");if(!u.budget)throw new Error("Missing gas budget");if(!u.payment)throw new Error("Missing gas payment");if(!u.price)throw new Error("Missing gas price");const d={sender:Ir(c),expiration:a||{None:!0},gasData:{payment:u.payment,owner:Ir(this.gasConfig.owner??c),price:BigInt(u.price),budget:BigInt(u.budget)},kind:{ProgrammableTransaction:{inputs:s,transactions:this.transactions}}};return O.TransactionData.serialize({V1:d},{maxSize:e}).toBytes()}getDigest(){const e=this.build({onlyTransactionKind:!1});return de.getDigestFromBytes(e)}snapshot(){return $(this,st)}}var hr=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},k=(t,e,r)=>(hr(t,e,"read from private field"),r?r.call(t):e.get(t)),ie=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},it=(t,e,r,n)=>(hr(t,e,"write to private field"),e.set(t,r),r),R=(t,e,r)=>(hr(t,e,"access private method"),r),T,Ue,ot,Ne,ct,ye,ke,fr,mn,gr,wn,pr,bn,yr,Sn,ut,Pt;const $i={maxPureArgumentSize:16*1024,maxTxGas:5e10,maxGasObjects:256,maxTxSizeBytes:128*1024};function Ui(t){const e={kind:"Result",index:t},r=[],n=s=>r[s]??(r[s]={kind:"NestedResult",index:t,resultIndex:s});return new Proxy(e,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,i){if(i in s)return Reflect.get(s,i);if(i===Symbol.iterator)return function*(){let c=0;for(;;)yield n(c),c++};if(typeof i=="symbol")return;const a=parseInt(i,10);if(!(Number.isNaN(a)||a<0))return n(a)}})}function Ni(t){const e=lr(t);return e?e.Struct.address==="0x2"&&e.Struct.module==="transfer"&&e.Struct.name==="Receiving":!1}function Ge(t){if(!t.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}const Tn=Symbol.for("@mysten/transaction"),It={maxTxGas:"max_tx_gas",maxGasObjects:"max_gas_payment_objects",maxTxSizeBytes:"max_tx_size_bytes",maxPureArgumentSize:"max_pure_argument_size"},Di=1000n,zi=50,Vi=(t,e)=>Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e));function Li(t){return!!t&&typeof t=="object"&&t[Tn]===!0}const $t=class{constructor(t){ie(this,Ue),ie(this,Ne),ie(this,ye),ie(this,fr),ie(this,gr),ie(this,pr),ie(this,yr),ie(this,ut),ie(this,T,void 0),it(this,T,new de(t?t.blockData:void 0))}static fromKind(t){const e=new $t;return it(e,T,de.fromKindBytes(typeof t=="string"?X(t):t)),e}static from(t){const e=new $t;return typeof t!="string"||!t.startsWith("{")?it(e,T,de.fromBytes(typeof t=="string"?X(t):t)):it(e,T,de.restore(JSON.parse(t))),e}setSender(t){k(this,T).sender=t}setSenderIfNotSet(t){k(this,T).sender||(k(this,T).sender=t)}setExpiration(t){k(this,T).expiration=t}setGasPrice(t){k(this,T).gasConfig.price=String(t)}setGasBudget(t){k(this,T).gasConfig.budget=String(t)}setGasOwner(t){k(this,T).gasConfig.owner=t}setGasPayment(t){k(this,T).gasConfig.payment=t.map(e=>qr(e,pe))}get blockData(){return k(this,T).snapshot()}get[Tn](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:gi((t,e)=>zt(t)?R(this,Ue,ot).call(this,"pure",{Pure:Array.from(t.toBytes())}):R(this,Ue,ot).call(this,"pure",t instanceof Uint8Array?U.Pure(t):e?U.Pure(t,e):t))}),this.pure}get gas(){return{kind:"GasCoin"}}object(t){if(typeof t=="object"&&"kind"in t)return t;const e=kr(t),r=k(this,T).inputs.find(n=>n.type==="object"&&e===kr(n.value));return r&&D(r.value,Mt)&&"Shared"in r.value.Object&&D(t,Mt)&&"Shared"in t.Object&&(r.value.Object.Shared.mutable=r.value.Object.Shared.mutable||t.Object.Shared.mutable),r??R(this,Ue,ot).call(this,"object",typeof t=="string"?_(t):t)}objectRef(...t){return this.object(U.ObjectRef(...t))}receivingRef(...t){return this.object(U.ReceivingRef(...t))}sharedObjectRef(...t){return this.object(U.SharedObjectRef(...t))}add(t){const e=k(this,T).transactions.push(t);return Ui(e-1)}splitCoins(t,e){return this.add(we.SplitCoins(typeof t=="string"?this.object(t):t,e.map(r=>typeof r=="number"||typeof r=="bigint"||typeof r=="string"?this.pure.u64(r):R(this,Ne,ct).call(this,r))))}mergeCoins(t,e){return this.add(we.MergeCoins(typeof t=="string"?this.object(t):t,e.map(r=>typeof r=="string"?this.object(r):r)))}publish({modules:t,dependencies:e}){return this.add(we.Publish({modules:t,dependencies:e}))}upgrade({modules:t,dependencies:e,packageId:r,ticket:n}){return this.add(we.Upgrade({modules:t,dependencies:e,packageId:r,ticket:typeof n=="string"?this.object(n):n}))}moveCall({arguments:t,typeArguments:e,target:r}){return this.add(we.MoveCall({arguments:t==null?void 0:t.map(n=>R(this,Ne,ct).call(this,n)),typeArguments:e,target:r}))}transferObjects(t,e){return this.add(we.TransferObjects(t.map(r=>typeof r=="string"?this.object(r):r),typeof e=="string"?this.pure.address(e):R(this,Ne,ct).call(this,e)))}makeMoveVec({type:t,objects:e}){return this.add(we.MakeMoveVec({type:t,objects:e.map(r=>typeof r=="string"?this.object(r):r)}))}serialize(){return JSON.stringify(k(this,T).snapshot())}async sign(t){const{signer:e,...r}=t,n=await this.build(r);return e.signTransactionBlock(n)}async build(t={}){return await R(this,ut,Pt).call(this,t),k(this,T).build({maxSizeBytes:R(this,ye,ke).call(this,"maxTxSizeBytes",t),onlyTransactionKind:t.onlyTransactionKind})}async getDigest(t={}){return await R(this,ut,Pt).call(this,t),k(this,T).getDigest()}};let qi=$t;T=new WeakMap;Ue=new WeakSet;ot=function(t,e){const r=k(this,T).inputs.length,n=$({kind:"Input",value:typeof e=="bigint"?String(e):e,index:r,type:t},Ke);return k(this,T).inputs.push(n),n};Ne=new WeakSet;ct=function(t){return zt(t)?this.pure(t):t};ye=new WeakSet;ke=function(t,{protocolConfig:e,limits:r}){if(r&&typeof r[t]=="number")return r[t];if(!e)return $i[t];const n=e==null?void 0:e.attributes[It[t]];if(!n)throw new Error(`Missing expected protocol config: "${It[t]}"`);const s="u64"in n?n.u64:"u32"in n?n.u32:n.f64;if(!s)throw new Error(`Unexpected protocol config value found for: "${It[t]}"`);return Number(s)};fr=new WeakSet;mn=function(t){const e=R(this,ye,ke).call(this,"maxPureArgumentSize",t);k(this,T).inputs.forEach((r,n)=>{if(D(r.value,pt)&&r.value.Pure.length>e)throw new Error(`Input at index ${n} is too large, max pure input size is ${e} bytes, got ${r.value.Pure.length} bytes`)})};gr=new WeakSet;wn=async function(t){if(k(this,T).gasConfig.payment){const s=R(this,ye,ke).call(this,"maxGasObjects",t);if(k(this,T).gasConfig.payment.length>s)throw new Error(`Payment objects exceed maximum amount: ${s}`)}if(t.onlyTransactionKind||k(this,T).gasConfig.payment)return;const e=k(this,T).gasConfig.owner??k(this,T).sender,n=(await Ge(t).getCoins({owner:e,coinType:ws})).data.filter(s=>!k(this,T).inputs.find(a=>D(a.value,yt)&&"Object"in a.value&&"ImmOrOwned"in a.value.Object?s.coinObjectId===a.value.Object.ImmOrOwned.objectId:!1)).slice(0,R(this,ye,ke).call(this,"maxGasObjects",t)-1).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");this.setGasPayment(n)};pr=new WeakSet;bn=async function(t){t.onlyTransactionKind||k(this,T).gasConfig.price||this.setGasPrice(await Ge(t).getReferenceGasPrice())};yr=new WeakSet;Sn=async function(t){const{inputs:e,transactions:r}=k(this,T),n=[],s=[];if(e.forEach(i=>{if(i.type==="object"&&typeof i.value=="string"){s.push({id:_(i.value),input:i});return}}),r.forEach(i=>{if(i.kind==="MoveCall"&&i.arguments.some(c=>c.kind==="Input"&&!D(e[c.index].value,yt))&&n.push(i),i.kind==="SplitCoins"&&i.amounts.forEach(a=>{if(a.kind==="Input"){const c=e[a.index];typeof c.value!="object"&&(c.value=U.Pure(O.U64.serialize(c.value)))}}),i.kind==="TransferObjects"&&i.address.kind==="Input"){const a=e[i.address.index];typeof a.value!="object"&&(a.value=U.Pure(O.Address.serialize(a.value)))}}),n.length&&await Promise.all(n.map(async i=>{const[a,c,u]=i.target.split("::"),d=await Ge(t).getNormalizedMoveFunction({package:te(a),module:c,function:u}),g=d.parameters.length>0&&_i(d.parameters.at(-1))?d.parameters.slice(0,d.parameters.length-1):d.parameters;if(g.length!==i.arguments.length)throw new Error("Incorrect number of arguments.");g.forEach((y,p)=>{const m=i.arguments[p];if(m.kind!=="Input")return;const S=e[m.index];if(D(S.value,yt))return;const E=S.value,B=Rt(y,E);if(B){S.value=U.Pure(E,B);return}if(lr(y)!=null||typeof y=="object"&&"TypeParameter"in y){if(typeof E!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(E,null,2)}`);s.push({id:E,input:S,normalizedType:y});return}throw new Error(`Unknown call arg type ${JSON.stringify(y,null,2)} for value ${JSON.stringify(E,null,2)}`)})})),s.length){const i=[...new Set(s.map(({id:f})=>f))],a=Vi(i,zi),c=(await Promise.all(a.map(f=>Ge(t).multiGetObjects({ids:f,options:{showOwner:!0}})))).flat();let u=new Map(i.map((f,g)=>[f,c[g]]));const d=Array.from(u).filter(([f,g])=>g.error).map(([f,g])=>f);if(d.length)throw new Error(`The following input objects are invalid: ${d.join(", ")}`);s.forEach(({id:f,input:g,normalizedType:y})=>{var E;const p=u.get(f),m=(E=p.data)==null?void 0:E.owner,S=m&&typeof m=="object"&&"Shared"in m?m.Shared.initial_shared_version:void 0;if(S){const B=y!=null&&jt(y)==null&&un(y)==null,M=fi(g.value)||B||y!=null&&jt(y)!=null;g.value=U.SharedObjectRef({objectId:f,initialSharedVersion:S,mutable:M})}else y&&Ni(y)?g.value=U.ReceivingRef(Er(p)):g.value=U.ObjectRef(Er(p))})}};ut=new WeakSet;Pt=async function(t){if(!t.onlyTransactionKind&&!k(this,T).sender)throw new Error("Missing transaction sender");if(!t.protocolConfig&&!t.limits&&t.client&&(t.protocolConfig=await t.client.getProtocolConfig()),await Promise.all([R(this,pr,bn).call(this,t),R(this,yr,Sn).call(this,t)]),!t.onlyTransactionKind&&(await R(this,gr,wn).call(this,t),!k(this,T).gasConfig.budget)){const e=await Ge(t).dryRunTransactionBlock({transactionBlock:k(this,T).build({maxSizeBytes:R(this,ye,ke).call(this,"maxTxSizeBytes",t),overrides:{gasConfig:{budget:String(R(this,ye,ke).call(this,"maxTxGas",t)),payment:[]}}})});if(e.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${e.effects.status.error}`,{cause:e});const r=Di*BigInt(this.blockData.gasConfig.price||1n),n=BigInt(e.effects.gasUsed.computationCost)+r,s=n+BigInt(e.effects.gasUsed.storageCost)-BigInt(e.effects.gasUsed.storageRebate);this.setGasBudget(s>n?s:n)}R(this,fr,mn).call(this,t)};const Fi=Symbol.for("@mysten/SuiClient");class Wi{get[Fi](){return!0}constructor(e){this.transport=e.transport??new Cs({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!oe(_(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!oe(_(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!oe(_(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!oe(_(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!oe(_(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!tt(te(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!tt(te(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Tr(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!Tr(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock(e){return await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:N(e.transactionBlock),Array.isArray(e.signature)?e.signature:[e.signature],e.options,e.requestType]})}async signAndExecuteTransactionBlock({transactionBlock:e,signer:r,...n}){let s;e instanceof Uint8Array?s=e:(e.setSenderIfNotSet(r.toSuiAddress()),s=await e.build({client:this}));const{signature:i,bytes:a}=await r.signTransactionBlock(s);return this.executeTransactionBlock({transactionBlock:a,signature:i,...n})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!oe(_(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!tt(te(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){var n;let r;if(Li(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=N(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=N(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,(n=e.gasPrice)==null?void 0:n.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:N(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!tt(te(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),r=Je(e.digest);return xe(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames(e){return await this.transport.request({method:"suix_resolveNameServiceNames",params:[e.address,e.cursor,e.limit]})}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version]})}async waitForTransactionBlock({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...s}){const i=AbortSignal.timeout(r),a=new Promise((c,u)=>{i.addEventListener("abort",()=>u(i.reason))});for(a.catch(()=>{});!i.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(u=>setTimeout(u,n)),a])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}class vn extends qn{}const mt="Sui",En=t=>{var r;const e=(r=t.data)==null?void 0:r.content;return e&&e.dataType==="moveObject"?e.fields:null},Ma=(t,e)=>{try{return Ar(t)===Ar(e)}catch{return!1}},Ra=t=>(t==null?void 0:t.type)==="created",Pa=t=>(t==null?void 0:t.type)==="published";function Ki(t){return Array.isArray(t)}function mr(t){return!Array.isArray(t)&&typeof t=="object"&&"fields"in t&&"type"in t}function Gi(t){return typeof t=="object"&&!Ki(t)&&!mr(t)}const Hi=16*1024,$a=t=>O.ser("vector<u8>",t,{maxSize:Hi}).toBytes(),Ua=async(t,e)=>{const{data:r,error:n}=await t.getObject({id:e,options:{showContent:!0}});if(n)throw new Error("Error getting object: "+n);if(!r||!mr(r.content))throw new Error(`Cannot get oject for state id ${e}: `+r);return Xi(r.content.type)},Zi=async(t,e)=>{if(!oe(e))throw new Error(`Invalid object ID: ${e}`);const r=await t.getObject({id:e,options:{showContent:!0}});return En(r)};async function Na(t,e){let r,n;do{const a=await t.getDynamicFields({parentId:e,cursor:n});r=a.data.find(c=>c.name.type.endsWith("CurrentPackage")),n=a.hasNextPage?a.nextCursor:null}while(n&&!r);if(!r)throw new Error("CurrentPackage not found");const s=await t.getObject({id:r.objectId,options:{showContent:!0}}),i=En(s);if(!i||!Gi(i))throw new Error("Unable to get fields from object response");if(!("value"in i)||!mr(i.value))throw new Error("Unable to get package id");return i.value.fields.package}const Da=async(t,e,r)=>{let n=null,s=null,i=null,a;do{if(i=await t.getOwnedObjects({owner:r,filter:{StructType:`${e}::emitter::EmitterCap`},options:{showContent:!0},cursor:a}),!i||!i.data)throw Error("Failed to get owned objects");for(const c of i.data){if(!c.data)continue;const{version:u,objectId:d}=c.data;(n===null||u<n)&&(n=u,s=d)}a=i.hasNextPage?i.nextCursor:void 0}while(a);return s},za=async(t,e)=>{const r=new qi,[n]=r.publish({modules:t.modules.map(s=>Array.from(Mn.decode(s))),dependencies:t.dependencies.map(s=>te(s))});return r.transferObjects([n],r.pure(e)),r},ae=class ae extends Fn{constructor(e,r){super(e,r??Rn(e,ae._platform))}getRpc(e){if(e in this.config)return new Wi({url:this.config[e].rpc});throw new Error("No configuration available for chain: "+e)}getChain(e){if(e in this.config)return new vn(e,this);throw new Error("No configuration available for chain: "+e)}static nativeTokenId(e,r){if(!ae.isSupportedChain(r))throw new Error(`invalid chain for ${mt}: ${r}`);return Pn.tokenId(r,bs)}static isNativeTokenId(e,r,n){return!ae.isSupportedChain(r)||n.chain!==r?!1:this.nativeTokenId(e,r)===n}static isSupportedChain(e){return $n(e)===ae._platform}static async getDecimals(e,r,n){if(bt(n))return Un(ae._platform);const s=new me(n);try{const a=await Zi(r,s.toString());if(a&&"decimals"in a)return a.decimals}catch{}const i=await r.getCoinMetadata({coinType:s.getCoinType()});if(i===null)throw new Error(`Can't fetch decimals for token ${s.toString()}`);return i.decimals}static async getBalance(e,r,n,s){if(bt(s)){const{totalBalance:a}=await r.getBalance({owner:n});return BigInt(a)}const{totalBalance:i}=await r.getBalance({owner:n,coinType:s.toString()});return BigInt(i)}static async getBalances(e,r,n,s){return(await Promise.all(s.map(async a=>{const c=await this.getBalance(e,r,n,a);return{[bt(a)?"native":new me(a).toString()]:c}}))).reduce((a,c)=>Object.assign(a,c),{})}static async sendWait(e,r,n){const s=[];for(const i of n){const a=await r.executeTransactionBlock(i);await r.waitForTransactionBlock({digest:a.digest}),s.push(a.digest)}return s}static async getLatestBlock(e){return Number(await e.getLatestCheckpointSequenceNumber())}static async getLatestFinalizedBlock(e){return this.getLatestBlock(e)}static chainFromChainId(e){const r=Nn(ae._platform,e);if(r===void 0)throw new Error(`Unknown native chain id ${e}`);const[n,s]=r;return[n,s]}static async chainFromRpc(e){const r=await e.call("sui_getChainIdentifier",[]);return this.chainFromChainId(r)}};ee(ae,"_platform",mt);let je=ae;const kn=t=>/^(0x)?[0-9a-fA-F]+::\w+::\w+$/.test(t),Ji=t=>t.replace(/(0x)(0*)/g,"0x");function _r(t){return t=t.startsWith("0x")?t.slice(2):t,t=t.length%2===0?t:"0"+t,`0x${t.length===64?t:De.encode(zn.zpad(De.decode(t),32))}`}const Ar=t=>{const e=t.split(_e);if(e.length!==3)throw new Error(`Invalid Sui type: ${t}`);return[_(e[0]),e[1],e[2]].join(_e)},Va=t=>new me(t).getCoinType(),Xi=t=>new me(t).getPackageId(),La=t=>{const e=Ji(t).match(/0x2::table::Table<(.*)>/);if(!e)throw new Error(`Invalid table type: ${t}`);if(e.length<2)throw new Error(`Invalid table type: ${t}`);const[r]=e[1].split(",");if(!r||!kn(r))throw new Error(`Invalid key type: ${r}`);return r},Te=class Te{constructor(e){ee(this,"address");ee(this,"module");if(Te.instanceof(e))this.address=e.address,this.module=e.module;else if(wr.instanceof(e))this.address=e.toUint8Array();else if(typeof e=="string"){if(kn(e)){const r=e.split(_e);this.module=r.slice(1).join(_e),e=r[0]}if(e=_r(e),!De.valid(e))throw new Error("Invalid Sui address: "+e);this.address=De.decode(e)}else this.address=e}unwrap(){const e=this.getPackageId(),r=this.module?_e+this.module:"";return`${e}${r}`}toString(){return this.unwrap()}toNative(){return this}toUint8Array(){return this.address}toUniversalAddress(){return new wr(this.toUint8Array())}getPackageId(){return _r(De.encode(this.address))}getCoinType(){return[this.getPackageId(),"coin","COIN"].join(_e)}static instanceof(e){return e.constructor.platform===Te.platform}equals(e){return Te.instanceof(e)?e.unwrap()===this.unwrap():this.toUniversalAddress().equals(e)}};ee(Te,"byteSize",32),ee(Te,"platform",je._platform);let me=Te;Dn(mt,me);var He=(t=>(t[t.TransactionData=0]="TransactionData",t[t.TransactionEffects=1]="TransactionEffects",t[t.CheckpointSummary=2]="CheckpointSummary",t[t.PersonalMessage=3]="PersonalMessage",t))(He||{});function Yi(t){return[t,0,0]}function xn(t,e){const r=Yi(t),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),n}const wt={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},Qi={ED25519:32,Secp256k1:33,Secp256r1:33},ea={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};function ta(t){for(let e=0;e<t.length;e++)if(t[e]!==0)return e;return-1}function ra(t,e){const r=t.toString(16);return Vn(r.padStart(e*2,"0").slice(-e*2))}function na(t,e){const r=ra(t,e),n=ta(r);return n===-1?new Uint8Array([0]):r.slice(n)}function sa(t,e){const r=na(t,32);e==="accounts.google.com"&&(e="https://accounts.google.com");const n=new TextEncoder().encode(e),s=new Uint8Array(2+r.length+n.length);return s.set([wt.ZkLogin]),s.set([n.length],1),s.set(n,2),s.set(r,2+n.length),_(jr(Le(s,{dkLen:32})).slice(0,Ye*2))}function ia(t){if(t.length!==1)throw new Error("Invalid base64Url character: "+t);const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t);if(r===-1)throw new Error("Invalid base64Url character: "+t);const n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}function aa(t){let e=[];for(let r=0;r<t.length;r++){const n=t.charAt(r),s=ia(n);e=e.concat(s)}return e}function oa(t,e){if(t.length<2)throw new Error(`Input (s = ${t}) is not tightly packed because s.length < 2`);let r=aa(t);const n=e%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${t}) is not tightly packed because i%4 = 3 (i = ${e}))`);const s=(e+t.length-1)%4;if(s!==3)if(s===2)r=r.slice(0,r.length-2);else if(s===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${t}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${e}))`);if(r.length%8!==0)throw new Error("We should never reach here...");const i=new Uint8Array(Math.floor(r.length/8));let a=0;for(let c=0;c<r.length;c+=8){const u=r.slice(c,c+8),d=parseInt(u.join(""),2);i[a++]=d}return new TextDecoder().decode(i)}function ca(t){if(!(t.slice(-1)==="}"||t.slice(-1)===","))throw new Error("Invalid claim");const e=JSON.parse("{"+t.slice(0,-1)+"}");if(Object.keys(e).length!==1)throw new Error("Invalid claim");const r=Object.keys(e)[0];return[r,e[r]]}function ua(t,e){const r=oa(t.value,t.indexMod4),[n,s]=ca(r);if(n!==e)throw new Error(`Invalid field name: found ${n} expected ${e}`);return s}const da=o.struct("ZkLoginSignature",{inputs:o.struct("ZkLoginSignatureInputs",{proofPoints:o.struct("ZkLoginSignatureInputsProofPoints",{a:o.vector(o.string()),b:o.vector(o.vector(o.string())),c:o.vector(o.string())}),issBase64Details:o.struct("ZkLoginSignatureInputsClaim",{value:o.string(),indexMod4:o.u8()}),headerBase64:o.string(),addressSeed:o.string()}),maxEpoch:o.u64(),userSignature:o.vector(o.u8())});function la(t){return da.parse(typeof t=="string"?X(t):t)}function ha({signature:t,signatureScheme:e,publicKey:r}){if(!r)throw new Error("`publicKey` is required");const n=r.toRawBytes(),s=new Uint8Array(1+t.length+n.length);return s.set([wt[e]]),s.set(t,1),s.set(n,1+t.length),N(s)}function fa(t){const e=X(t),r=ea[e[0]];switch(r){case"MultiSig":const n=O.MultiSig.parse(e.slice(1));return{serializedSignature:t,signatureScheme:r,multisig:n,bytes:e};case"ZkLogin":const s=e.slice(1),{inputs:i,maxEpoch:a,userSignature:c}=la(s),{issBase64Details:u,addressSeed:d}=i,f=ua(u,"iss"),g=sa(BigInt(d),f);return{serializedSignature:t,signatureScheme:r,zkLogin:{inputs:i,maxEpoch:a,userSignature:c,iss:f,address:g,addressSeed:BigInt(d)},signature:e};case"ED25519":case"Secp256k1":case"Secp256r1":const y=Qi[r],p=e.slice(1,e.length-y),m=e.slice(1+p.length);return{serializedSignature:t,signatureScheme:r,signature:p,publicKey:m,bytes:e};default:throw new Error("Unsupported signature scheme")}}const dt=32,ga="suiprivkey";class pa{async signWithIntent(e,r){const n=xn(r,e),s=Le(n,{dkLen:32});return{signature:ha({signature:await this.sign(s),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:N(e)}}async signTransactionBlock(e){return this.signWithIntent(e,He.TransactionData)}async signPersonalMessage(e){return this.signWithIntent(o.vector(o.u8()).serialize(e).toBytes(),He.PersonalMessage)}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class ya extends pa{export(){return{schema:this.getKeyScheme(),privateKey:this.getSecretKey()}}}function ma(t,e){if(t.length!==dt)throw new Error("Invalid bytes length");const r=wt[e],n=new Uint8Array(t.length+1);return n.set([r]),n.set(t,1),br.encode(ga,br.toWords(n))}function Or(t){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(t)}function wa(t){return Gn(t,"")}function ba(t){return xe(wa(t))}const Sa="ed25519 seed",Ta=2147483648,va=new RegExp("^m(\\/[0-9]+')+$"),In=t=>t.replace("'",""),Ea=t=>{const r=Mr.create(Nt,Sa).update(Xe(t)).digest(),n=r.slice(0,32),s=r.slice(32);return{key:n,chainCode:s}},ka=({key:t,chainCode:e},r)=>{const n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);const i=new Uint8Array(1+t.length+n.byteLength);i.set(new Uint8Array(1).fill(0)),i.set(t,1),i.set(new Uint8Array(n,0,n.byteLength),t.length+1);const a=Mr.create(Nt,e).update(i).digest(),c=a.slice(0,32),u=a.slice(32);return{key:c,chainCode:u}},xa=t=>va.test(t)?!t.split("/").slice(1).map(In).some(isNaN):!1,Cr=(t,e,r=Ta)=>{if(!xa(t))throw new Error("Invalid derivation path");const{key:n,chainCode:s}=Ea(e);return t.split("/").slice(1).map(In).map(a=>parseInt(a,10)).reduce((a,c)=>ka(a,c+r),{key:n,chainCode:s})};function _n(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}class Ia{equals(e){return _n(this.toRawBytes(),e.toRawBytes())}toBase64(){return N(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return N(e)}verifyWithIntent(e,r,n){const s=xn(n,e),i=Le(s,{dkLen:32});return this.verify(i,r)}verifyPersonalMessage(e,r){return this.verifyWithIntent(O.vector(O.u8()).serialize(e).toBytes(),r,He.PersonalMessage)}verifyTransactionBlock(e,r){return this.verifyWithIntent(e,r,He.TransactionData)}toSuiBytes(){const e=this.toRawBytes(),r=new Uint8Array(e.length+1);return r.set([this.flag()]),r.set(e,1),r}toSuiAddress(){return _(jr(Le(this.toSuiBytes(),{dkLen:32})).slice(0,Ye*2))}}const Ut=32;class An extends Ia{constructor(e){if(super(),typeof e=="string"?this.data=X(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==Ut)throw new Error(`Invalid public key input. Expected ${Ut} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return wt.ED25519}async verify(e,r){let n;if(typeof r=="string"){const s=fa(r);if(s.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!_n(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");n=s.signature}else n=r;return be.sign.detached.verify(e,n,this.toRawBytes())}}An.SIZE=Ut;const Br="m/44'/784'/0'/0'/0'";class Ae extends ya{constructor(e){super(),e?this.keypair=e:this.keypair=be.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new Ae(be.sign.keyPair())}static fromSecretKey(e,r){const n=e.length;if(n!==dt)throw new Error(`Wrong secretKey size. Expected ${dt} bytes, got ${n}.`);const s=be.sign.keyPair.fromSeed(e);if(!r||!r.skipValidation){const a=new TextEncoder().encode("sui validation"),c=be.sign.detached(a,s.secretKey);if(!be.sign.detached.verify(a,c,s.publicKey))throw new Error("provided secretKey is invalid")}return new Ae(s)}getPublicKey(){return new An(this.keypair.publicKey)}getSecretKey(){return ma(this.keypair.secretKey.slice(0,dt),this.getKeyScheme())}async sign(e){return this.signData(e)}signData(e){return be.sign.detached(e,this.keypair.secretKey)}static deriveKeypair(e,r){if(r==null&&(r=Br),!Or(r))throw new Error("Invalid derivation path");const{key:n}=Cr(r,ba(e));return Ae.fromSecretKey(n)}static deriveKeypairFromSeed(e,r){if(r==null&&(r=Br),!Or(r))throw new Error("Invalid derivation path");const{key:n}=Cr(r,e);return Ae.fromSecretKey(n)}}async function _a(t,e){const[,r]=await je.chainFromRpc(t);return new Aa(r,t,Ae.deriveKeypair(e,"m/44'/784'/0'/0'/0'"))}class Aa{constructor(e,r,n,s){ee(this,"_chain");ee(this,"_client");ee(this,"_signer");ee(this,"_debug");this._chain=e,this._client=r,this._signer=n,this._debug=s}chain(){return this._chain}address(){return this._signer.toSuiAddress()}async signAndSend(e){const r=[];for(const n of e){const{description:s,transaction:i}=n;this._debug&&console.log(`Signing ${s} for ${this.address()}`);const a=await this._client.signAndExecuteTransactionBlock({transactionBlock:i,signer:this._signer});r.push(a.digest)}return r}}const Oa={Address:me,Platform:je,getSigner:_a,protocols:{WormholeCore:()=>Sr(()=>import("./index-C0pSVWJK.js"),__vite__mapDeps([0,1,2,3,4])),TokenBridge:()=>Sr(()=>import("./index-CW1jLsHT.js"),__vite__mapDeps([5,1,2,0,3,4]))},getChain:(t,e,r)=>new vn(e,new je(t,Ln(t,mt,{[e]:r})))},qa=Object.freeze(Object.defineProperty({__proto__:null,default:Oa},Symbol.toStringTag,{value:"Module"}));export{je as S,mt as _,Xi as a,La as b,En as c,Gi as d,mr as e,Pa as f,Zi as g,Ra as h,kn as i,Va as j,Ma as k,Da as l,Na as m,Ua as n,me as o,za as p,qa as s,Ji as t,$a as u};
